{"version":3,"sources":["scene/lights.js","scene/biomes.js","scene/materials.js","scene/models.js","scene/planet.js","scene/hero.js","scene/player.js","scene/composer.js","Scene.js","FrontPage.js","App.js","index.js"],"names":["moonColor","sunColor","Lights","fog","target","distance","rotationSpeed","size","moonLight","THREE","sunLight","morningLight","eveningLight","geometry","moonMaterial","color","sunMaterial","moon","sun","daytimeAngle","Math","PI","daytimeX","cos","daytimeY","sin","targetPosition","daytimePosition","position","set","add","animate","delta","rotateY","getWorldPosition","daytime","angleTo","daytimeColor","chroma","hex","far","length","polarLatitude","temperateLatitude","tropicalLatitude","materials","flatShading","shininess","animateBiomes","oceanMaterial","offset","x","transparent","opacity","side","Mat","blackMat","brownMat","greenMat","pinkMat","lightBrownMat","whiteMat","skinMat","blueMat","shading","Tree","trunc","Trunc","topRadius","bottomRadius","height","nhSegments","nvSegments","matTrunc","geom","applyMatrix4","makeTranslation","castShadow","growFruit","v","random","fruitGeometry","matFruit","obj","keys","Object","randomProperty","fruit","y","z","rotation","growBranch","h","thickness","branchGeometry","branch","vec","axis","quaternion","setFromUnitVectors","clone","normalize","i","attributes","count","noise","fromBufferAttribute","getAttribute","Planet","radius","widthSegments","heightSegments","noiseProps","NoiseSphereGeometry","toNonIndexed","biomes","normal","vertex","a","b","c","faceElevation","max","faceNormal","setMaterialIndex","base","materialIndex","parseInt","min","latitude","abs","addGroup","applyBiomes","oceanGeometry","ocean","phi","j","theta","fir","seed","noiseWidth","noiseHeight","noiseMax","noiseMin","elevation","positions","newVertex","getNoise","vertice","p","fade","t","lerp","grad","hash","u","floorX","floor","floorY","floorZ","X","Y","Z","xMinus1","yMinus1","zMinus1","w","A","AA","AB","B","BA","BB","ImprovedNoise","l","push","noiseN","setLength","scalar","setAttribute","Float32Array","Rabbit","status","runningCycle","body","torsoGeom","torso","pantsGeom","pants","tailGeom","tail","headGeom","head","cheekGeom","cheekR","cheekL","noseGeom","nose","LightBrownMat","mouthGeom","makeRotationX","mouth","pawFGeom","pawFR","pawFL","pawBGeom","pawBL","pawBR","earGeom","earL","earR","eyeGeom","eyeL","irisGeom","iris","eyeR","children","traverse","object","receiveShadow","run","scale","jump","setY","Fish","fishFastColor","fishSlowColor","bodyGeom","bodyMat","bodyFish","tailMat","tailFish","lipsGeom","lipsMat","lipsFish","topFish","sideRightFish","sideLeftFish","eyeMat","rightEye","irisMat","rightIris","leftEye","leftIris","toothGeom","toothMat","tooth1","tooth2","tooth3","tooth4","tooth5","rvalue","gvalue","bvalue","material","setRGB","s3","Hero","handGeom","handR","handL","legGeom","legR","legL","PlayerCamera","fov","camera","window","innerWidth","innerHeight","translateZ","translateY","rotateX","getPerspectiveCamera","rotateVertically","radX","PlayerSubject","modelName","initialY","cameraProps","playerName","model","rotateCamera","PlayerControls","directionVelocity","gravity","jumpVelocity","maxGravity","mouseSpeed","meshProps","contact","mesh","direction","velocity","raycaster","move","left","front","right","back","getMesh","noiseSphere","Number","rotateZ","ray","origin","copy","negate","intersections","intersectObject","point","onMouseMove","event","movementX","mozMovementX","webkitMovementX","movementY","mozMovementY","webkitMovementY","onKeyDown","keyCode","onKeyUp","document","addEventListener","dispose","removeEventListener","ComposerRabbit","renderer","scene","addPass","RenderPass","pixelPass","ShaderPass","PixelShader","uniforms","value","multiplyScalar","devicePixelRatio","EffectComposer","ComposerFish","bloomPass","UnrealBloomPass","afterimagePass","AfterimagePass","Scene","props","antialias","setPixelRatio","setSize","domElement","planet","background","this","sceneRef","appendChild","onResize","animationFrame","requestAnimationFrame","removeChild","child","remove","player","lights","composer","timestamp","time","render","ref","className","Component","defaultProps","Date","now","FrontPage","roll","bind","console","log","id","onMouseOver","App","state","pointerLock","webgl","pointerLockChange","setState","pointerLockElement","appRef","current","mozPointerLockElement","webkitPointerLockElement","requestPointerLock","mozRequestPointerLock","webkitRequestPointerLock","exitPointerLock","mozExitPointerLock","webkitExitPointerLock","WebGLRenderingContext","canvas","createElement","getContext","Boolean","alerts","instructions","onClick","content","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.0f068eb1.chunk.js","sourcesContent":["import * as THREE from \"three\";\nimport * as chroma from \"chroma-js\";\n\nconst   moonColor = 0xE8EAF6,\n        sunColor = 0xFFF8E1,\n        dayColor = 0x90CAF9,\n        nightColor = 0x000000,\n        morningColor = 0xB2EBF2,\n        eveningColor = 0xFFCCBC;\n\nexport default class Lights extends THREE.Object3D {\n    constructor(fog, target, {distance, rotationSpeed, size}) {\n        const moonLight = new THREE.DirectionalLight(moonColor, 0.33),\n             sunLight = new THREE.DirectionalLight(sunColor, 0.67),\n            morningLight = new THREE.HemisphereLight(morningColor, nightColor, 0.33),\n            eveningLight = new THREE.HemisphereLight(eveningColor, nightColor, 0.33),\n\n            geometry = new THREE.SphereGeometry(size, 8, 6),\n            moonMaterial = new THREE.MeshBasicMaterial({color: moonColor, fog: false}),\n            sunMaterial = new THREE.MeshBasicMaterial({color: sunColor, fog: false}),\n            moon = new THREE.Mesh(geometry, moonMaterial),\n            sun = new THREE.Mesh(geometry, sunMaterial),\n\n            daytimeAngle = Math.PI / 3,\n            daytimeX = Math.cos(daytimeAngle) * distance,\n            daytimeY = Math.sin(daytimeAngle) * distance,\n\n            targetPosition = new THREE.Vector3(),\n            daytimePosition = new THREE.Vector3();\n\n        moon\n            .position\n            .set(-distance, 0, 0);\n        moonLight\n            .position\n            .set(-distance, 0, 0);\n        sun\n            .position\n            .set(distance, 0, 0);\n        sunLight\n            .position\n            .set(distance, 0, 0);\n\n        morningLight\n            .position\n            .set(daytimeX, 0, -daytimeY);\n        eveningLight\n            .position\n            .set(daytimeX, 0, daytimeY);\n\n        super();\n\n        this.add(moon);\n        this.add(moonLight);\n        this.add(sun);\n        this.add(sunLight);\n        this.add(morningLight);\n        this.add(eveningLight);\n\n        this.animate = (delta) => {\n            this.rotateY(delta * rotationSpeed);\n            sun.getWorldPosition(daytimePosition);\n            target.getWorldPosition(targetPosition);\n            const daytime = daytimePosition.angleTo(targetPosition) / Math.PI,\n                daytimeColor = chroma\n                    .mix(dayColor, nightColor, daytime)\n                    .hex();\n            fog\n                .color\n                .set(daytimeColor);\n            fog.far = targetPosition.length();\n        }\n    }\n}\n\n","import * as THREE from \"three\";\n\nconst polarLatitude = Math.sin(3 * Math.PI / 8),\n      temperateLatitude = Math.sin(2 * Math.PI / 8),\n      tropicalLatitude = Math.sin(1 * Math.PI / 8);\n\nexport const materials = [\n\n    new THREE.MeshPhongMaterial({color: 0x37474F, flatShading:THREE.FlatShading}),\n\n\tnew THREE.MeshPhongMaterial({color: 0x757575,shininess:0,flatShading:THREE.FlatShading}),\n\tnew THREE.MeshPhongMaterial({color: 0xA3A3A3,shininess:0,flatShading:THREE.FlatShading}),\n\tnew THREE.MeshPhongMaterial({color: 0xD1D1D1,shininess:0,flatShading:THREE.FlatShading}),\n\tnew THREE.MeshPhongMaterial({color: 0xFFFFFF,flatShading:THREE.FlatShading}),\n\n\tnew THREE.MeshPhongMaterial({color: 0xA39D8A,flatShading:THREE.FlatShading}),\n    new THREE.MeshPhongMaterial({color: 0xAFB19A,flatShading:THREE.FlatShading}),\n    new THREE.MeshPhongMaterial({color: 0xBAC4AA, flatShading:THREE.FlatShading}),\n\tnew THREE.MeshPhongMaterial({color: 0xC6D8BA,shininess:0,flatShading:THREE.FlatShading}),\n\n\tnew THREE.MeshPhongMaterial({color: 0xD1C49E,shininess:0,flatShading:THREE.FlatShading}),\n\tnew THREE.MeshPhongMaterial({color: 0xBBBE90,shininess:0,flatShading:THREE.FlatShading}),\n\tnew THREE.MeshPhongMaterial({color: 0xA4B882,flatShading:THREE.FlatShading}),\n\tnew THREE.MeshPhongMaterial({color: 0x8EB274,flatShading:THREE.FlatShading}),\n\n    new THREE.MeshPhongMaterial({color: 0xFFECB3,flatShading:THREE.FlatShading}),\n    new THREE.MeshPhongMaterial({color: 0xC6CC87, flatShading:THREE.FlatShading}),\n\tnew THREE.MeshPhongMaterial({color: 0x8EAB5B,shininess:0,flatShading:THREE.FlatShading}),\n    new THREE.MeshPhongMaterial({color: 0x558B2F,shininess:0,flatShading:THREE.FlatShading})\n];\n\nexport const applyBiomes = (geometry) => {\n\n        let normal = new THREE.Vector3();\n        let position = geometry.attributes.position;\n        let vertex = new THREE.Vector3();\n\n        for ( let i = 0; i < position.count; i +=3 ) {\n            let a = vertex.fromBufferAttribute( position, i );\n            let b = vertex.fromBufferAttribute( position, i + 1 );\n            let c = vertex.fromBufferAttribute( position, i + 2 );\n\n            let faceElevation = Math.max(a.length(), b.length(), c.length());\n            let faceNormal = normal.fromBufferAttribute( geometry.attributes.normal, i );\n\n            const  setMaterialIndex = (base) => {\n                let materialIndex = base + parseInt(faceElevation * 4, 10);\n                return Math.min(materialIndex, base + 3);\n            };\n            let latitude = Math.abs(faceNormal.y);\n\n            if (latitude > polarLatitude) {\n                geometry.addGroup(i,3,setMaterialIndex(1));\n            } else if (latitude > temperateLatitude) {\n                geometry.addGroup(i,3,setMaterialIndex(5));\n            } else if (latitude > tropicalLatitude) {\n                geometry.addGroup(i,3,setMaterialIndex(9));\n            } else {\n                geometry.addGroup(i,3,setMaterialIndex(13));\n            }\n        }\n    };\n\n\nexport const animateBiomes = (delta) => {\n    oceanMaterial.offset.x += delta / 12; \n    };\n\nexport const oceanMaterial = new THREE.MeshPhongMaterial({color: 0xA3BDD4,transparent:true, opacity: 0.8});\n\noceanMaterial.side = THREE.DoubleSide;\n\n   \n\n\n","import * as THREE from \"three\";\n\nexport const Mat = {\n\tblackMat : new THREE.MeshPhongMaterial({\n\t\tcolor: 0x100707,\n\t\tflatShading:THREE.FlatShading,\n\t}),\n\n\tbrownMat : new THREE.MeshPhongMaterial({\n\t\tcolor: 0xb44b39,\n\t\tshininess:0,\n\t\tflatShading:THREE.FlatShading,\n\t}),\n\n\tgreenMat : new THREE.MeshPhongMaterial({\n\t\tcolor: 0x7abf8e,\n\t\tshininess:0,\n\t\tflatShading:THREE.FlatShading}),\n\n\tpinkMat : new THREE.MeshPhongMaterial({\n\t\tcolor: 0xdc5f45,//0xb43b29,//0xff5b49,\n\t\tshininess:0,\n\t\tflatShading:THREE.FlatShading,\n\t}),\n\n\tlightBrownMat : new THREE.MeshPhongMaterial({\n\t\tcolor: 0xe07a57,\n\t\tflatShading:THREE.FlatShading,\n\t}),\n\n\twhiteMat : new THREE.MeshPhongMaterial({\n\t\tcolor: 0xa49789,\n\t\tflatShading:THREE.FlatShading,\n\t}),\n\n\tskinMat : new THREE.MeshPhongMaterial({\n\t\tcolor: 0xff9ea5,\n\t\tflatShading:THREE.FlatShading\n\t}),\n\n\tblueMat : new THREE.MeshPhongMaterial({\n\t\tcolor: 0x5b9696,\n\t\tshading:THREE.FlatShading\n\t  })\n};\n\n\n\n\n","import * as THREE from \"three\";\nimport { Mat } from \"./materials\"\n\nconst randomProperty = function (obj) {\n    let keys = Object.keys(obj);\n    return obj[keys[ keys.length * Math.random() << 0]];\n};\n\nexport class Tree extends THREE.Mesh{\n    constructor(trunc) {\n    super();\n    this.add(trunc);\n}\n}\n\nexport class Trunc extends THREE.Mesh {\nconstructor(topRadius, bottomRadius, height, nhSegments, nvSegments) {\n  let matTrunc = Mat.whiteMat;\n  // Generate geometry\n  let geom = new THREE.CylinderGeometry(topRadius, bottomRadius,height, nhSegments, nvSegments);\n  geom.applyMatrix4(new THREE.Matrix4().makeTranslation(0, height / 2, 0));\n  super(geom, matTrunc);\n  this.castShadow = true;\n\n// method for adding fruit to the trunc\nthis.growFruit = (v) => {\n  // fruit parameters\n  let size = Math.random()*3;\n  let fruitGeometry = new THREE.BoxGeometry(size, size, size, 1);\n\n  let matFruit = randomProperty(Mat);\n  let fruit = new THREE.Mesh(fruitGeometry, matFruit);\n  // fruit position and direction\n  fruit.position.x = v.x;\n  fruit.position.y = v.y+3;\n  fruit.position.z = v.z;\n  fruit.rotation.x = Math.random()*Math.PI;\n  fruit.rotation.y = Math.random()*Math.PI;\n  // add this fruit to trunc mesh\n  this.add(fruit);\n}\n\n// method for adding branch to the trunc\nthis.growBranch =(v) => {\n  // branch parameters\n  let h = 3 + Math.random()*5;\n  let thickness = .2 + Math.random();\n  let branchGeometry = new THREE.CylinderGeometry(thickness / 2, thickness, h, 3, 1);\n  branchGeometry.applyMatrix4(new THREE.Matrix4().makeTranslation(0, h / 2, 0));\n  let branch = new THREE.Mesh(branchGeometry, matTrunc);\n  // branch position and direction\n  branch.position.x = v.x;\n  branch.position.y = v.y;\n  branch.position.z = v.z;\n  let vec = new THREE.Vector3(v.x, 2, v.z);\n  let axis = new THREE.Vector3(0,1,0);\n  branch.quaternion.setFromUnitVectors(axis, vec.clone().normalize());\n  // add this branch to trunc mesh\n  this.add(branch);\n}\n\n  // Generate branch and fruit\nfor (let i=0; i <geom.attributes.position.count; i++){\n    let noise = Math.random() ;\n    let v = new THREE.Vector3(); \n    v = v.fromBufferAttribute(geom.getAttribute( 'position' ),[i])\n\n    v.x += -noise + Math.random()*noise*2;\n    v.y += -noise + Math.random()*noise*2;\n    v.z += -noise + Math.random()*noise*2;\n\n    // Fruit\n    if (Math.random()>.7){\n      this.growFruit(v);\n    }\n\n    // Branch\n    if (Math.random()>.5 && v.y > 10 && v.y < this.height - 10){\n      this.growBranch(v);\n    }\n  }\n}\n}\n","import { animateBiomes, applyBiomes, materials, oceanMaterial } from './biomes';\nimport { Trunc, Tree } from \"./models\"\nimport * as THREE from \"three\";\n\nconst ImprovedNoise = function (x, y, z) {\n\n\tvar p = [ 151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,\n\t\t 23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,\n\t\t 174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,\n\t\t 133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,\n\t\t 89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,\n\t\t 202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,\n\t\t 248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,\n\t\t 178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,\n\t\t 14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,\n\t\t 93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180 ];\n\n\tfor (var i = 0; i < 256 ; i ++) {\n\n\t\tp[256 + i] = p[i];\n\n\t}\n\n\tfunction fade(t) {\n\n\t\treturn t * t * t * (t * (t * 6 - 15) + 10);\n\n\t}\n\n\tfunction lerp(t, a, b) {\n\n\t\treturn a + t * (b - a);\n\n\t}\n\n\tfunction grad(hash, x, y, z) {\n\n\t\tvar h = hash & 15;\n\t\tvar u = h < 8 ? x : y, v = h < 4 ? y : h === 12 || h === 14 ? x : z;\n\t\treturn ((h&1) === 0 ? u : -u) + ((h&2) === 0 ? v : -v);\n\n\t}\n\n\tfunction getNoise (x, y, z) {\n\n\t\tvar floorX = Math.floor(x), floorY = Math.floor(y), floorZ = Math.floor(z);\n\n\t\tvar X = floorX & 255, Y = floorY & 255, Z = floorZ & 255;\n\n\t\tx -= floorX;\n\t\ty -= floorY;\n\t\tz -= floorZ;\n\n\t\tvar xMinus1 = x - 1, yMinus1 = y - 1, zMinus1 = z - 1;\n\n\t\tvar u = fade(x), v = fade(y), w = fade(z);\n\n\t\tvar A = p[X] + Y, AA = p[A] + Z, AB = p[A + 1] + Z, B = p[X + 1] + Y, BA = p[B] + Z, BB = p[B + 1] + Z;\n\n\t\treturn lerp(w, lerp(v, lerp(u, grad(p[AA], x, y, z),\n\t\t\tgrad(p[BA], xMinus1, y, z)),\n\t\t\tlerp(u, grad(p[AB], x, yMinus1, z),\n\t\t\t\tgrad(p[BB], xMinus1, yMinus1, z))),\n\t\t\tlerp(v, lerp(u, grad(p[AA + 1], x, y, zMinus1),\n\t\t\t\tgrad(p[BA + 1], xMinus1, y, z - 1)),\n\t\t\t\tlerp(u, grad(p[AB + 1], x, yMinus1, zMinus1),\n\t\t\t\t\tgrad(p[BB + 1], xMinus1, yMinus1, zMinus1))));\n\n\t}\n\n\treturn getNoise(x, y, z);\n};\n\nexport default class Planet extends THREE.Mesh {\n    constructor({\n        radius,\n        widthSegments,\n        heightSegments,\n        ...noiseProps\n    }) {\n        const geometry = new NoiseSphereGeometry(radius, widthSegments, heightSegments, noiseProps).toNonIndexed(),\n            biomes = applyBiomes(geometry);\n\n        const oceanGeometry = new THREE.SphereGeometry(radius, widthSegments, heightSegments),\n            ocean = new THREE.Mesh(oceanGeometry, oceanMaterial);\n\n        super(geometry, materials);\n        this.add(biomes,ocean);\n\n\t\tthis.animate = animateBiomes;\n\n\t\t\n\t\tlet nTrees = 5;\n\t\tfor(let i = 0; i < nTrees; i++){\n\t\t\tlet phi = i * (Math.PI * 2) / nTrees;\n\t\t\tfor(let j=0; j< nTrees; j++){\n\t\t\tlet theta = j* Math.PI*2 / nTrees;\n\t\t\ttheta += .25 + Math.random()*.3;\n\t\n\t\t\tlet trunc = new Trunc(\n\t\t\t1 + Math.random() * 1,\n\t\t\t3 + Math.random() * 1,\n\t\t\t25 + Math.random() * 25,\n\t\t\t3,\n\t\t\t3\n\t\t\t);\n\t\t\tlet fir = new Tree(trunc);\n\t\t\tfir.position.x = Math.sin(theta) * Math.cos(phi) * radius;\n\t\t\tfir.position.y = Math.sin(theta) * Math.sin(phi) * (radius-10);\n\t\t\tfir.position.z = Math.cos(theta) * radius;\n\t\n\t\t\tlet vec = fir.position.clone();\n\t\t\tlet axis = new THREE.Vector3(0, 1, 0);\n\t\t\tfir.quaternion.setFromUnitVectors(axis, vec.clone().normalize());\n\t\t\t\n\t\t\tthis.add(fir);\n\t\t}\n\t\t}\n\t\t  \n\t\t\n    }\n}\n\nclass NoiseSphereGeometry extends THREE.SphereGeometry {\n    constructor(radius, widthSegments, heightSegments, {seed, noiseWidth, noiseHeight}) {\n        super(radius, widthSegments, heightSegments);\n        let positions = this.attributes.position;\n        let vertex = new THREE.Vector3();\n        let newVertex = [];\n\n\t\tconst getNoise = (vertice) => ImprovedNoise(\n\t\t\tseed + vertice.x / noiseWidth,\n\t\t\tseed + vertice.y / noiseWidth,\n\t\t\tseed + vertice.z / noiseWidth\n\t\t);\n\n\t\tlet noiseMax = 0, noiseMin = 0;\n\t\tlet noise = [];\n\n\t\tfor ( let i = 0, l = positions.count; i < l; i ++ ) {\n\t\t\tlet vertice = vertex.fromBufferAttribute( positions, i );\n\t\t\tnoise.push(getNoise(vertice));\n\t\t}\n\t\tnoiseMax = Math.max(...noise);\n\t\tnoiseMin = -Math.min(...noise);\n\n\t\tlet elevation;\n\t\tfor ( let i = 0, l = positions.count; i < l; i ++ ) {\n\t\t\tlet vertice = vertex.fromBufferAttribute( positions, i );\n\n\t\t\tlet noiseN = getNoise(vertice);\n\n\t\t\tif(noiseN > 0) {\n\t\t\t\televation = noiseN / noiseMax\n\t\t\t} else if(noiseN < 0) {\n\t\t\t\televation = noiseN / noiseMin\n\t\t\t} else if (noiseN === 0) {\n\t\t\t\televation = 0;\n\t\t\t}\n\t\t\tvertice = vertice.setLength(elevation + radius)\n\t\t\tlet scalar = 1+ elevation * noiseHeight / radius;\n\n\t\t\tnewVertex.push(vertice.x*scalar);\n\t\t\tnewVertex.push(vertice.y*scalar);\n\t\t\tnewVertex.push(vertice.z*scalar);\n\t\t}\n\n\t\t// set the new vertices with noise back to this (SphereGeometry)\n\t\tthis.setAttribute( 'position', new THREE.BufferAttribute(new Float32Array(newVertex), 3));\n\t}\n}\n\n","import * as THREE from \"three\";\nimport { Mat } from \"./materials\"\n\nexport  class Rabbit extends THREE.Group {\n\tconstructor(){\n\t\tsuper();\n\n\t\tthis.status = \"running\";\n\t\tthis.runningCycle = 0;\n\t\tthis.body = new THREE.Group();\n\t\tthis.add(this.body);\n\n\t\tlet speed = 6;\n\n\t\tlet torsoGeom = new THREE.BoxGeometry(7, 7, 10, 1);\n\n\t\tthis.torso = new THREE.Mesh(torsoGeom, Mat.brownMat);\n\t\tthis.torso.position.z = 0;\n\t\tthis.torso.position.y = 7;\n\t\tthis.torso.castShadow = true;\n\t\tthis.body.add(this.torso);\n\n\t\tlet pantsGeom = new THREE.BoxGeometry(9, 9, 5, 1);\n\t\tthis.pants = new THREE.Mesh(pantsGeom, Mat.whiteMat);\n\t\tthis.pants.position.z = -3;\n\t\tthis.pants.position.y = 0;\n\t\tthis.pants.castShadow = true;\n\t\tthis.torso.add(this.pants);\n\n\t\tlet tailGeom = new THREE.BoxGeometry(3, 3, 3, 1);\n\t\ttailGeom.applyMatrix4(new THREE.Matrix4().makeTranslation(0,0,-2));\n\t\tthis.tail = new THREE.Mesh(tailGeom, Mat.lightBrownMat);\n\t\tthis.tail.position.z = -4;\n\t\tthis.tail.position.y = 5;\n\t\tthis.tail.castShadow = true;\n\t\tthis.torso.add(this.tail);\n\n\t\tthis.torso.rotation.x = -Math.PI/8;\n\n\t\tlet headGeom = new THREE.BoxGeometry(10, 10, 13, 1);\n\n\t\theadGeom.applyMatrix4(new THREE.Matrix4().makeTranslation(0,0,7.5));\n\t\tthis.head = new THREE.Mesh(headGeom, Mat.brownMat);\n\t\tthis.head.position.z = 2;\n\t\tthis.head.position.y = 11;\n\t\tthis.head.castShadow = true;\n\t\tthis.body.add(this.head);\n\n\t\tlet cheekGeom = new THREE.BoxGeometry(1, 4, 4, 1);\n\t\tthis.cheekR = new THREE.Mesh(cheekGeom, Mat.pinkMat);\n\t\tthis.cheekR.position.x = -5;\n\t\tthis.cheekR.position.z = 7;\n\t\tthis.cheekR.position.y = -2.5;\n\t\tthis.cheekR.castShadow = true;\n\t\tthis.head.add(this.cheekR);\n\n\t\tthis.cheekL = this.cheekR.clone();\n\t\tthis.cheekL.position.x = - this.cheekR.position.x;\n\t\tthis.head.add(this.cheekL);\n\n\n\t\tlet noseGeom = new THREE.BoxGeometry(6, 6, 3, 1);\n\t\tthis.nose = new THREE.Mesh(noseGeom, Mat.LightBrownMat);\n\t\tthis.nose.position.z = 13.5;\n\t\tthis.nose.position.y = 2.6;\n\t\tthis.nose.castShadow = true;\n\t\tthis.head.add(this.nose);\n\n\t\tlet mouthGeom = new THREE.BoxGeometry(4, 2, 4, 1);\n\t\tmouthGeom.applyMatrix4(new THREE.Matrix4().makeTranslation(0,0,3));\n\t\tmouthGeom.applyMatrix4(new THREE.Matrix4().makeRotationX(Math.PI/12));\n\t\tthis.mouth = new THREE.Mesh(mouthGeom, Mat.brownMat);\n\t\tthis.mouth.position.z = 8;\n\t\tthis.mouth.position.y = -4;\n\t\tthis.mouth.castShadow = true;\n\t\tthis.head.add(this.mouth);\n\n\n\t\tlet pawFGeom = new THREE.BoxGeometry(3,3,3, 1);\n\t\tthis.pawFR = new THREE.Mesh(pawFGeom, Mat.lightBrownMat);\n\t\tthis.pawFR.position.x = -2;\n\t\tthis.pawFR.position.z = 6;\n\t\tthis.pawFR.position.y = 1.5;\n\t\tthis.pawFR.castShadow = true;\n\t\tthis.body.add(this.pawFR);\n\n\t\tthis.pawFL = this.pawFR.clone();\n\t\tthis.pawFL.position.x = - this.pawFR.position.x;\n\t\tthis.pawFL.castShadow = true;\n\t\tthis.body.add(this.pawFL);\n\n\t\tlet pawBGeom = new THREE.BoxGeometry(3,3,6, 1);\n\t\tthis.pawBL = new THREE.Mesh(pawBGeom, Mat.lightBrownMat);\n\t\tthis.pawBL.position.y = 1.5;\n\t\tthis.pawBL.position.z = 0;\n\t\tthis.pawBL.position.x = 5;\n\t\tthis.pawBL.castShadow = true;\n\t\tthis.body.add(this.pawBL);\n\n\t\tthis.pawBR = this.pawBL.clone();\n\t\tthis.pawBR.position.x = - this.pawBL.position.x;\n\t\tthis.pawBR.castShadow = true;\n\t\tthis.body.add(this.pawBR);\n\n\t\tlet earGeom = new THREE.BoxGeometry(7, 18, 2, 1);\n\t\tearGeom.applyMatrix4(new THREE.Matrix4().makeTranslation(0,9,0));\n\n\t\tthis.earL = new THREE.Mesh(earGeom, Mat.brownMat);\n\t\tthis.earL.position.x = 2;\n\t\tthis.earL.position.z = 2.5;\n\t\tthis.earL.position.y = 5;\n\t\tthis.earL.rotation.z = -Math.PI/12;\n\t\tthis.earL.castShadow = true;\n\t\tthis.head.add(this.earL);\n\n\t\tthis.earR = this.earL.clone();\n\t\tthis.earR.position.x = -this.earL.position.x;\n\t\tthis.earR.rotation.z = -this.earL.rotation.z;\n\t\tthis.earR.castShadow = true;\n\t\tthis.head.add(this.earR);\n\n\t\tlet eyeGeom = new THREE.BoxGeometry(2,4,4);\n\n\t\tthis.eyeL = new THREE.Mesh(eyeGeom, Mat.whiteMat);\n\t\tthis.eyeL.position.x = 5;\n\t\tthis.eyeL.position.z = 5.5;\n\t\tthis.eyeL.position.y = 2.9;\n\t\tthis.eyeL.castShadow = true;\n\t\tthis.head.add(this.eyeL);\n\n\t\tlet irisGeom = new THREE.BoxGeometry(.6,2,2);\n\n\t\tthis.iris = new THREE.Mesh(irisGeom, Mat.blackMat);\n\t\tthis.iris.position.x = 1.2;\n\t\tthis.iris.position.y = 1;\n\t\tthis.iris.position.z = 1;\n\t\tthis.eyeL.add(this.iris);\n\n\t\tthis.eyeR = this.eyeL.clone();\n\t\tthis.eyeR.children[0].position.x = -this.iris.position.x;\n\n\n\t\tthis.eyeR.position.x = -this.eyeL.position.x;\n\t\tthis.head.add(this.eyeR);\n\n\t\tthis.body.traverse(function(object) {\n\t\t\tif (object instanceof THREE.Mesh) {\n\t\t\t\tobject.castShadow = true;\n\t\t\t\tobject.receiveShadow = true;\n\t\t\t}\n\t\t});\n\n\t\tthis.run = (delta)=>{\n\t\t\tthis.status = \"running\";\n\n\t\t\tthis.runningCycle += delta * speed * .7;\n\t\t\tthis.runningCycle = this.runningCycle % (Math.PI*2);\n\t\t\tlet t = this.runningCycle;\n\n\t\t\tconst amp = 4;\n\t\t\tconst disp = .2;\n\n\t\t\t// BODY\n\n\t\t\tthis.body.position.y = 6+ Math.sin(t - Math.PI/2)*amp;\n\t\t\tthis.body.rotation.x = .2 + Math.sin(t - Math.PI/2)*amp*.1;\n\n\t\t\tthis.torso.rotation.x =  Math.sin(t - Math.PI/2)*amp*.1;\n\t\t\tthis.torso.position.y =  7 + Math.sin(t - Math.PI/2)*amp*.5;\n\n\t\t\t// MOUTH\n\t\t\tthis.mouth.rotation.x = Math.PI/16 + Math.cos(t)*amp*.05;\n\n\t\t\t// HEAD\n\t\t\tthis.head.position.z = 2 + Math.sin(t - Math.PI/2)*amp*.5;\n\t\t\tthis.head.position.y = 8 + Math.cos(t - Math.PI/2)*amp*.7;\n\t\t\tthis.head.rotation.x = -.2 + Math.sin(t + Math.PI)*amp*.1;\n\n\t\t\t// EARS\n\t\t\tthis.earL.rotation.x = Math.cos(-Math.PI/2 + t)*(amp*.2);\n\t\t\tthis.earR.rotation.x = Math.cos(-Math.PI/2 + .2 + t)*(amp*.3);\n\n\t\t\t// EYES\n\t\t\tthis.eyeR.scale.y = this.eyeL.scale.y = .7 +  Math.abs(Math.cos(-Math.PI/4 + t*.5))*.6;\n\n\t\t\t// TAIL\n\t\t\tthis.tail.rotation.x = Math.cos(Math.PI/2 + t)*amp*.3;\n\n\t\t\t// FRONT RIGHT PAW\n\t\t\tthis.pawFR.position.y = 1.5 + Math.sin(t)*amp;\n\t\t\tthis.pawFR.rotation.x = Math.cos(t ) * Math.PI/4;\n\t\t\tthis.pawFR.position.z = 6 - Math.cos(t)*amp*2;\n\n\t\t\t// FRONT LEFT PAW\n\n\t\t\tthis.pawFL.position.y = 1.5 + Math.sin(disp + t)*amp;\n\t\t\tthis.pawFL.rotation.x = Math.cos( t ) * Math.PI/4;\n\t\t\tthis.pawFL.position.z = 6 - Math.cos(disp+t)*amp*2;\n\n\t\t\t// BACK RIGHT PAW\n\t\t\tthis.pawBR.position.y = 1.5 + Math.sin(Math.PI + t)*amp;\n\t\t\tthis.pawBR.rotation.x = Math.cos(t + Math.PI*1.5) * Math.PI/3;\n\n\n\t\t\tthis.pawBR.position.z = - Math.cos(Math.PI + t)*amp;\n\n\t\t\t// BACK LEFT PAW\n\t\t\tthis.pawBL.position.y = 1.5 + Math.sin(Math.PI + t)*amp;\n\t\t\tthis.pawBL.rotation.x = Math.cos(t + Math.PI *1.5) * Math.PI/3;\n\t\t\tthis.pawBL.position.z = - Math.cos(Math.PI + t)*amp;\n\t\t}\n\n\t\tthis.jump = () => {\n\t\t\tthis.status = \"jumping\";\n\t\t\tlet jumpHeight = 30;\n\n\t\t\tthis.earL.rotation.x = Math.cos(-Math.PI)\n\t\t\tthis.earR.rotation.x = Math.cos(-Math.PI)\n\t\t\tthis.body.position.setY(this.body.position.y + jumpHeight);\n\n\t\t\t\n\t\t  }\n\t}\n}\n\nexport class Fish extends THREE.Group {\n\tconstructor(){\n\t\tsuper();\n\t\tthis.runningCycle = 0;\n\t\tthis.body = new THREE.Group();\n\t\tthis.add(this.body);\n\n\t\tlet fishFastColor = {r:255, g:0, b:224}; // pastel blue\n\t\tlet fishSlowColor = {r:0, g:207, b:255}; // purple\n    \tlet angleFin = 0;\n\t\tlet speed = 5;\n\t\tlet smoothing = 10;\n\t\t// this.fish.scale.set(0.05, 0.05, 0.05);//\n\t\n\t// Body \n\tlet bodyGeom = new THREE.BoxGeometry(120, 120, 120);\n\tlet bodyMat = new THREE.MeshLambertMaterial({\n\t   color: 0x80f5fe ,\n\t   shading: THREE.FlatShading\n\t });\n\t this.bodyFish = new THREE.Mesh(bodyGeom, bodyMat);\n\t this.body.add(this.bodyFish);\n\t \n\t // Tail\n\tlet tailGeom = new THREE.CylinderGeometry(0, 60, 60, 4, false);\n\tlet tailMat = new THREE.MeshLambertMaterial({\n\t   color: 0xff00dc,\n\t   shading: THREE.FlatShading\n\t });\n\t \n\t this.tailFish = new THREE.Mesh(tailGeom, tailMat);\n\t this.tailFish.scale.set(.8,1,.1);\n\t this.tailFish.position.x = -60; \n\t this.tailFish.rotation.z = -Math.PI/2;\n\t this.body.add(this.tailFish)\n\t \n\t // Lips\n\t let lipsGeom = new THREE.BoxGeometry(25, 10, 120);\n\t let lipsMat = new THREE.MeshLambertMaterial({\n\t   color: 0x80f5fe ,\n\t   shading: THREE.FlatShading\n\t });\n\t this.lipsFish = new THREE.Mesh(lipsGeom, lipsMat);\n\t this.lipsFish.position.x = 65;\n\t this.lipsFish.position.y = -47;\n\t this.lipsFish.rotation.z = Math.PI/2;\n\t this.body.add(this.lipsFish);\n\t \n\t // Fins\n\t this.topFish = new THREE.Mesh(tailGeom, tailMat);\n\t this.topFish.scale.set(.8,1,.1);\n\t this.topFish.position.x = -20; \n\t this.topFish.position.y = 60; \n\t this.topFish.rotation.z = -Math.PI/2;\n\t \n\t this.sideRightFish = new THREE.Mesh(tailGeom, tailMat);\n\t this.sideRightFish.scale.set(.8,1,.1);\n\t this.sideRightFish.rotation.x = Math.PI/2;\n\t this.sideRightFish.rotation.z = -Math.PI/2;\n\t this.sideRightFish.position.x = 0; \n\t this.sideRightFish.position.y = -50; \n\t this.sideRightFish.position.z = -60; \n\t \n\t this.sideLeftFish = new THREE.Mesh(tailGeom, tailMat);\n\t this.sideLeftFish.scale.set(.8,1,.1);\n\t this.sideLeftFish.rotation.x = Math.PI/2;\n\t this.sideLeftFish.rotation.z = -Math.PI/2;\n\t this.sideLeftFish.position.x = 0; \n\t this.sideLeftFish.position.y = -50; \n\t this.sideLeftFish.position.z = 60; \n\n\t this.body.add(this.topFish,this.sideLeftFish,this.sideRightFish);\n\t \n\t // Eyes\n\t let eyeGeom = new THREE.BoxGeometry(40, 40,5);\n\t let eyeMat = new THREE.MeshLambertMaterial({\n\t   color: 0xffffff,\n\t   shading: THREE.FlatShading\n\t });\n\t \n\t this.rightEye = new THREE.Mesh(eyeGeom,eyeMat );\n\t this.rightEye.position.z = -60;\n\t this.rightEye.position.x = 25;\n\t this.rightEye.position.y = -10;\n\t \n\t let irisGeom = new THREE.BoxGeometry(10, 10,3);\n\t let irisMat = new THREE.MeshLambertMaterial({\n\t   color: 0x330000,\n\t   shading: THREE.FlatShading\n\t });\n\t \n\t this.rightIris = new THREE.Mesh(irisGeom,irisMat );\n\t this.rightIris.position.z = -65;\n\t this.rightIris.position.x = 35;\n\t this.rightIris.position.y = -10;\n\t \n\t this.leftEye = new THREE.Mesh(eyeGeom,eyeMat );\n\t this.leftEye.position.z = 60;\n\t this.leftEye.position.x = 25;\n\t this.leftEye.position.y = -10;\n\t \n\t this.leftIris = new THREE.Mesh(irisGeom,irisMat );\n\t this.leftIris.position.z = 65;\n\t this.leftIris.position.x = 35;\n\t this.leftIris.position.y = -10;\n\n\t this.body.add(this.rightEye,this.leftEye,this.leftIris,this.rightIris)\n\t   \n\t let toothGeom = new THREE.BoxGeometry(20, 4, 20);\n\t let toothMat = new THREE.MeshLambertMaterial({\n\t   color: 0xffffff,\n\t   shading: THREE.FlatShading\n\t });\n\t \n\t // Teeth\n\t this.tooth1 = new THREE.Mesh(toothGeom,toothMat);\n\t this.tooth1.position.x = 65;\n\t this.tooth1.position.y = -35;\n\t this.tooth1.position.z = -50;\n\t this.tooth1.rotation.z = Math.PI/2;\n\t this.tooth1.rotation.x = -Math.PI/2;\n\t \n\t this.tooth2 = new THREE.Mesh(toothGeom,toothMat);\n\t this.tooth2.position.x = 65;\n\t this.tooth2.position.y = -30;\n\t this.tooth2.position.z = -25;\n\t this.tooth2.rotation.z = Math.PI/2;\n\t this.tooth2.rotation.x = -Math.PI/12;\n\t \n\t this.tooth3 = new THREE.Mesh(toothGeom,toothMat);\n\t this.tooth3.position.x = 65;\n\t this.tooth3.position.y = -25;\n\t this.tooth3.position.z = 0;\n\t this.tooth3.rotation.z = Math.PI/2;\n\t \n\t this.tooth4 = new THREE.Mesh(toothGeom,toothMat);\n\t this.tooth4.position.x = 65;\n\t this.tooth4.position.y = -30;\n\t this.tooth4.position.z = 25;\n\t this.tooth4.rotation.z = Math.PI/2;\n\t this.tooth4.rotation.x = Math.PI/12;\n\t \n\t this.tooth5 = new THREE.Mesh(toothGeom,toothMat);\n\t this.tooth5.position.x = 65;\n\t this.tooth5.position.y = -35;\n\t this.tooth5.position.z = 50;\n\t this.tooth5.rotation.z = Math.PI/2;\n\t this.tooth5.rotation.x = Math.PI/8;\n\t \n\t this.body.add(this.tooth1,this.tooth2,this.tooth3,this.tooth4,this.tooth5);\n\n\t this.body.rotation.y = -Math.PI/4;\n\t this.body.rotation.y = -Math.PI/4;\n\n\t this.body.position.setY = 1000000;\n\n\t this.body.traverse(function(object) {\n\t\tif (object instanceof THREE.Mesh) {\n\t\t\tobject.castShadow = true;\n\t\t\tobject.receiveShadow = true;\n\t\t}\n\t});\n\n\t this.run = (delta)=>{\n\n\t\t// speed.x = velocity.x;\n\t\t// speed.y = velocity.z;\n\n\t\t// // make the fish swing according to the mouse direction\n\t\t// this.fish.rotation.z += ((-speed.y/50)-this.fish.rotation.z)/smoothing;\n\t\t// this.fish.rotation.x += ((-speed.y/50)-this.fish.rotation.x)/smoothing;\n\t\t// this.fish.rotation.y += ((-speed.y/50)-this.fish.rotation.y)/smoothing;\n\t\t\n\t\t// // make the fish move according to the mouse direction\n\t\t// this.fish.position.x += (((speed.x)) - this.fish.position.x) / smoothing;\n\t\t// this.fish.position.y += ((-speed.y*10)-this.fish.position.y)/smoothing;\n\t\t\n\t\t// // make the eyes follow the mouse direction\n\t\t// this.rightEye.rotation.z = this.leftEye.rotation.z = -speed.y/150;\n\t\t// this.rightIris.position.x = this.leftIris.position.y = -10 - speed.y/2;\n\t\t\n\t\t// // make it look angry when the speed increases by narrowing the eyes\n\t\t// this.rightEye.scale.set(1,1-(speed.x/150),1);\n\t\t// this.leftEye.scale.set(1,1-(speed.x/150),1);\n\t\t\n\t\t// // in order to optimize, I precalculate a smaller speed values depending on speed.x\n\t\t// // these variables will be used to update the wagging of the tail, the color of the fish and the scale of the fish\n\t\t// const s2 = speed.x/100; // used for the wagging speed and color \n\t\t// const s3 = speed.x/300; // used for the scale\n\t\t\n\t\t// // I use an angle that I increment, and then use its cosine and sine to make the tail wag in a cyclic movement. The speed of the wagging depends on the global speed\n\t\t// angleFin += s2;\n\t\t// // for a better optimization, precalculate sine and cosines\n\t\t// const backTailCycle = Math.cos(t); \n\t\t// const sideFinsCycle = Math.sin(t/5);\n\t\t\n\t\t// this.tailFish.rotation.y = backTailCycle*.5;\n\t\t// this.topFish.rotation.x = sideFinsCycle*.5;\n\t\t// this.sideRightFish.rotation.x = Math.PI/2 + sideFinsCycle*.2;\n\t\t// this.sideLeftFish.rotation.x = Math.PI/2 + sideFinsCycle*.2;\n\t\t\n\t\t// // color update depending on the speed\n\t\t// const rvalue = (fishSlowColor.r + (fishFastColor.r - fishSlowColor.r)*s2)/255;\n\t\t// const gvalue = (fishSlowColor.g + (fishFastColor.g - fishSlowColor.g)*s2)/255;\n\t\t// const bvalue = (fishSlowColor.b + (fishFastColor.b - fishSlowColor.b)*s2)/255;\n\t\t// this.bodyFish.material.color.setRGB(rvalue,gvalue,bvalue);\n\t\t// this.lipsFish.material.color.setRGB(rvalue,gvalue,bvalue);\n\t\t\n\t\t// //scale update depending on the speed => make the fish struggling to progress\n\t\t// this.fish.scale.set(1+s3,1-s3,1-s3);\n\n\t\tthis.status = \"running\";\n\n\t\tthis.runningCycle += delta * speed * .7;\n\t\tthis.runningCycle = this.runningCycle % (Math.PI*2);\n\t\tlet t = this.runningCycle;\n\n\t\tthis.body.position.y = 6+ Math.sin(t - Math.PI/2);//\n\n\t\tthis.tailFish.rotation.y = Math.cos(t)*.5;\n\t\tthis.topFish.rotation.x = Math.sin(t/5)*.5;\n\t\tthis.sideRightFish.rotation.x = Math.PI/2 + Math.sin(t/5)*.2;\n\t\tthis.sideLeftFish.rotation.x = Math.PI/2 + Math.sin(t/5)*.2;\n\n\t\tconst rvalue = (fishSlowColor.r + (fishFastColor.r - fishSlowColor.r)*t/5)/255;\n\t\tconst gvalue = (fishSlowColor.g + (fishFastColor.g - fishSlowColor.g)*t/5)/255;\n\t\tconst bvalue = (fishSlowColor.b + (fishFastColor.b - fishSlowColor.b)*t/5)/255;\n\t\tthis.bodyFish.material.color.setRGB(rvalue,gvalue,bvalue);\n\t\tthis.lipsFish.material.color.setRGB(rvalue,gvalue,bvalue);\n\n\t\tconst s3 = speed * delta / 5; \n\t\tthis.body.scale.set(1+s3,1-s3,1-s3)\n\n\n\n\t }\n\n\t this.jump = () => {\n\t\tthis.status = \"jumping\";\n\t\tlet jumpHeight = 30;\n\n\t\t// this.legL.rotation.x = Math.cos(-Math.PI)\n\t\t// this.legR.rotation.x = Math.cos(-Math.PI)\n\t\tthis.body.position.setY(this.body.position.y + jumpHeight);\n\t}\n\t }\n}\n\nexport class Hero extends THREE.Group {\n\tconstructor(){\n\t\tsuper();\n\n\t\tthis.status = \"running\";\n\t\tthis.runningCycle = 0;\n\t\tthis.body = new THREE.Group();\n\t\tthis.add(this.body);\n\n\t\tlet speed = 4;\n\n\t\tlet torsoGeom = new THREE.BoxGeometry(8, 8, 8, 1);\n\n\t\tthis.torso = new THREE.Mesh(torsoGeom, Mat.blueMat);\n\t\tthis.torso.position.y = 8;\n\t\tthis.torso.castShadow = true;\n\t\tthis.body.add(this.torso);\n\n\t\tlet handGeom = new THREE.BoxGeometry(3,3,3,1);\n\t\tthis.handR = new THREE.Mesh(handGeom, Mat.brownMat);\n\t\tthis.handR.position.z=7;\n\t\tthis.handR.position.y=8;\n\t\tthis.body.add(this.handR);\n\n\t\tthis.handL = this.handR.clone();\n\t\tthis.handL.position.z = - this.handR.position.z;\n\t\tthis.body.add(this.handL);\n\n\t\tlet headGeom = new THREE.BoxGeometry(16,16,16, 1);\n\t\tthis.head = new THREE.Mesh(headGeom, Mat.blueMat);\n\t\tthis.head.position.y = 21;\n\t\tthis.head.castShadow = true;\n\t\tthis.body.add(this.head);\n\n\t\tlet legGeom = new THREE.BoxGeometry(8,3,5, 1);\n\n\t\tthis.legR = new THREE.Mesh(legGeom, Mat.brownMat);\n\t\tthis.legR.position.x = 0;\n\t\tthis.legR.position.z = 7;\n\t\tthis.legR.position.y = 0;\n\t\tthis.legR.castShadow = true;\n\t\tthis.body.add(this.legR);\n\n\t\tthis.legL = this.legR.clone();\n\t\tthis.legL.position.z = - this.legR.position.z;\n\t\tthis.legL.castShadow = true;\n\t\tthis.body.add(this.legL);\n\n\t\tthis.run = (delta)=>{\n\t\t\tthis.status = \"running\";\n\n\t\t\tthis.runningCycle += delta * speed * .7;\n\t\t\tthis.runningCycle = this.runningCycle % (Math.PI*2);\n\t\t\tlet t = this.runningCycle;\n\n\t\t\tconst amp = 4;\n\n\t\t\tthis.legR.position.x =  Math.cos(t) * amp;\n\t\t\tthis.legR.position.y = Math.max (0, - Math.sin(t) * amp);  \n\t\t\t\n\t\t\tthis.legL.position.x =  Math.cos(t + Math.PI) * amp;\n\t\t\tthis.legL.position.y = Math.max (0, - Math.sin(t + Math.PI) * amp);\n\n\t\t\tthis.body.position.y = 6+ Math.sin(t - Math.PI/2)*amp;//\n\t\t\t\n\t\t\tthis.torso.position.y = 8 - Math.cos(  t * 2 ) * amp * .2;\n\t\t\tthis.torso.rotation.y = -Math.cos( t + Math.PI ) * amp * .05;\n\t\t\t\n\t\t\tthis.head.position.y = 21 - Math.cos(  t * 2 ) * amp * .3;\n\t\t\tthis.head.rotation.x = Math.cos( t ) * amp * .02;\n\t\t\tthis.head.rotation.y =  Math.cos( t ) * amp * .01;\n\t\t  \n\t\t\tthis.handR.position.x = -Math.cos( t ) * amp;\n\t\t\tthis.handR.rotation.z = -Math.cos( t ) * Math.PI/8;\n\t\t\tthis.handL.position.x = -Math.cos( t + Math.PI) * amp;\n\t\t\tthis.handL.rotation.z = -Math.cos( t + Math.PI) * Math.PI/8;\n\t\t}\n\n\t\tthis.jump = () => {\n\t\t\tthis.status = \"jumping\";\n\t\t\tlet jumpHeight = 30;\n\n\t\t\tthis.legL.rotation.x = Math.cos(-Math.PI)\n\t\t\tthis.legR.rotation.x = Math.cos(-Math.PI)\n\t\t\tthis.body.position.setY(this.body.position.y + jumpHeight);\n\n\t\t\t\n\t\t  }\n\t}\n}","import * as THREE from \"three\";\nimport {Rabbit, Fish, Hero} from \"./hero\";\n\n\nclass PlayerCamera extends THREE.Object3D {\n    // Third Person Camera\n    constructor({\n        distance,\n        far,\n        fov\n    }, height) {\n        const camera = new THREE.PerspectiveCamera(fov, window.innerWidth / window.innerHeight, 1, far);\n        super();\n\n        camera.translateZ(distance);\n        this.add(camera);\n        this.translateY(height);\n        this.rotateX(-Math.PI / 4);\n\n        this.getPerspectiveCamera = () => camera;\n        this.rotateVertically = (radX) => {\n            const min = Math.min(Math.PI / 2, this.rotation.x + radX);\n            this.rotation.x = Math.max(-Math.PI / 2, min);\n        };\n    }\n}\n\nclass PlayerSubject extends THREE.Mesh {\n    constructor({\n        modelName,\n        height,\n        initialY,\n        playerName,\n        ...cameraProps\n    }) {\n        super();\n        // Add rabbit as the player\n        switch (modelName) {\n            case 'Rabbit':\n                this.model = new Rabbit();\n                break;\n            case 'Hero':\n                this.model = new Hero();\n                break;\n            case 'Fish':\n                this.model = new Fish();\n                break;\n            default:\n                this.model = new Rabbit();\n                break;\n        }\n        this.model.scale.set(0.2, 0.2, 0.2);  // scale the rabbit to have a best model size. Better to adjust the model size in Rabbit class.\n        this.model.rotateY(Math.PI*0.8);\n        this.add(this.model);\n\n        // Add camera\n        const camera = new PlayerCamera(cameraProps, height);\n        this.add(camera);\n        this\n            .position\n            .setY(initialY);\n\n        this.getPerspectiveCamera = camera.getPerspectiveCamera;\n        this.rotateCamera = camera.rotateVertically;\n    }\n}\n\nexport default class PlayerControls extends THREE.Object3D {\n    constructor({\n        directionVelocity,\n        gravity,\n        jumpVelocity,\n        maxGravity,\n        mouseSpeed,\n        ...meshProps\n    }) {\n        let contact = false;\n        const mesh = new PlayerSubject(meshProps),\n            direction = new THREE.Vector3(),\n            velocity = new THREE.Vector3(),\n            raycaster = new THREE.Raycaster(),\n            move = {\n                left: false,\n                front: false,\n                right: false,\n                back: false,\n                jump: false\n            };\n\n        super();\n\n        this.add(mesh);\n\n        this.getPerspectiveCamera = mesh.getPerspectiveCamera;\n        this.getMesh = () => mesh;\n        this.animate = (delta, noiseSphere) => {\n            // Run Rabbit\n            this.getMesh().model.run(delta);\n            // Jump Rabbit\n            if(move.jump === true){\n            this.getMesh().model.jump() ;\n            }\n            // Set Velocity\n            direction.set(Number(move.left) - Number(move.right), 0, Number(move.back) - Number(move.front));\n            direction.normalize();\n            velocity.x = direction.x * directionVelocity * delta;\n            velocity.z = direction.z * directionVelocity * delta;\n            if (contact) {\n                velocity.y = Number(move.jump) * jumpVelocity - gravity * delta;\n            } else {\n                velocity.y = Math.max(-maxGravity * delta, velocity.y - gravity * delta);\n                \n            }\n            // Apply Rotation\n            this.rotateX(velocity.z * Math.PI / 128);\n            this.rotateZ(velocity.x * Math.PI / 128);\n            // Intersection Altitude\n            mesh.getWorldPosition(raycaster.ray.origin);\n            raycaster\n                .ray\n                .origin\n                .setLength(mesh.position.y * 2);\n            raycaster\n                .ray\n                .direction\n                .copy(raycaster.ray.origin)\n                .negate()\n                .normalize();\n            const intersections = raycaster.intersectObject(noiseSphere, false);\n            if (intersections.length > 0) {\n                const length = intersections[0]\n                    .point\n                    .length();\n                // Apply Contact\n                mesh.translateY(velocity.y);\n                if (mesh.position.y <= length) {\n                    mesh\n                        .position\n                        .setY(length);\n                    contact = true;\n                } else {\n                    contact = false;\n                }\n            }\n        };\n\n        // Events\n        const onMouseMove = (event) => {\n                const movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0,\n                    movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\n                mesh.rotateCamera(-movementY * mouseSpeed);\n                this.rotateY(-movementX * mouseSpeed);\n            },\n            onKeyDown = ({keyCode}) => {\n                switch (keyCode) {\n                    case 32: // space\n                        move.jump = true;\n                        break;\n                    case 37: // left\n                    case 65: // a\n                        move.left = true;\n                        break;\n                    case 38: // up\n                    case 87: // w\n                        move.front = true;\n                        break;\n                    case 39: // right\n                    case 68: // d\n                        move.right = true;\n                        break;\n                    case 40: // down\n                    case 83: // s\n                        move.back = true;\n                        break;\n                    // case 88: // x\n                    //     playerSwich;\n                    //     break;    \n                    default:\n                        break;\n                }\n            },\n            onKeyUp = ({keyCode}) => {\n                switch (keyCode) {\n                    case 32: // space\n                        move.jump = false;\n                        break;\n                    case 37: // left\n                    case 65: // a\n                        move.left = false;\n                        break;\n                    case 38: // up\n                    case 87: // w\n                        move.front = false;\n                        break;\n                    case 39: // right\n                    case 68: // d\n                        move.right = false;\n                        break;\n                    case 40: // down\n                    case 83: // s\n                        move.back = false;\n                        break;\n                    default:\n                        break;\n                }\n            };\n        document.addEventListener('keydown', onKeyDown, false);\n        document.addEventListener('keyup', onKeyUp, false);\n        document.addEventListener('mousemove', onMouseMove, false);\n        this.dispose = () => {\n            document.removeEventListener('keydown', onKeyDown, false);\n            document.removeEventListener('keyup', onKeyUp, false);\n            document.removeEventListener('mousemove', onMouseMove, false);\n        };\n    }\n}\n\n","import * as THREE from \"three\";\n\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js';\nimport { SSAOPass } from 'three/examples/jsm/postprocessing/SSAOPass.js';\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass.js';\nimport { AfterimagePass } from 'three/examples/jsm/postprocessing/AfterimagePass.js';\nimport { PixelShader } from 'three/examples/jsm/shaders/PixelShader.js';\n\nexport class ComposerRabbit extends EffectComposer{\n\tconstructor(renderer, scene, camera){\n\t\tsuper(renderer);\n\t\tthis.addPass( new RenderPass( scene, camera ) );\n\t\tconst pixelPass = new ShaderPass( PixelShader );\n\t\tpixelPass.uniforms[ \"resolution\" ].value = new THREE.Vector2( window.innerWidth, window.innerHeight );\n\t\tpixelPass.uniforms[ \"resolution\" ].value.multiplyScalar( window.devicePixelRatio );\n\t\tpixelPass.uniforms[ \"pixelSize\" ].value = 12;\n\t\tthis.addPass( pixelPass );\n\t}\n}\n\nexport class ComposerSnake extends EffectComposer{\n\tconstructor(renderer, scene, camera){\n\t\tsuper(renderer);\n\t\tconst ssaoPass = new SSAOPass( scene, camera, window.innerWidth, window.innerHeight);\n\t\tssaoPass.kernelRadius = 100;\n\t\tthis.addPass( ssaoPass );\n\t\tssaoPass.output = SSAOPass.OUTPUT.SSAO;\n\t\tssaoPass.minDistance = 0;\n\t}\n}\n\nexport class ComposerFish extends EffectComposer{\n\tconstructor(renderer, scene, camera){\n\t\tsuper(renderer);\n\t\tconst bloomPass = new UnrealBloomPass( new THREE.Vector2( window.innerWidth, window.innerHeight ), 0.3, 0.1, 0 );\n\t\tconst afterimagePass = new AfterimagePass();\n\t\tafterimagePass.value = 0.5;\n\t\tthis.addPass( new RenderPass( scene, camera ) );\n\t\tthis.addPass( bloomPass );\n\t\tthis.addPass( afterimagePass );\n\t}\n}","import React, { Component } from 'react';\n\nimport Lights from './scene/lights';\nimport Planet from './scene/planet';\nimport PlayerControls from './scene/player';\nimport PropTypes from 'prop-types';\nimport {ComposerRabbit, ComposerSnake, ComposerFish} from \"./scene/composer\";\n\nimport * as THREE from \"three\";\n\nexport class Scene extends Component {\n\n    constructor(props) {\n        super(props);\n\n        // scene\n        this.scene = new THREE.Scene();\n        this.renderer = new THREE.WebGLRenderer( { antialias: true } );\n\n        this.renderer.setPixelRatio( window.devicePixelRatio );\n        this.renderer.setSize( window.innerWidth, window.innerHeight );\n        this.domElement = this.renderer.domElement;\n\n        // planet\n        this.planet = new Planet(this.props.planet);\n        this.scene.add(this.planet);\n\n        // fog and lights\n        this.scene.fog = new THREE.Fog();\n        this.scene.background = this.scene.fog.color;\n    }\n\n    componentDidMount(){\n        this.sceneRef\n            .appendChild(this.domElement);\n        window.addEventListener('resize', this.onResize, false);\n\n        if (!this.animationFrame) {\n            this.animationFrame = requestAnimationFrame(this.animate);\n        }\n\n        document.addEventListener('keydown',this.onKeyDown, false);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.onResize, false);\n        this.sceneRef\n            .removeChild(this.domElement);\n    }\n\n    render() {\n        // Remove old player and lights\n        for( let i = this.scene.children.length - 1; i > 0; i--) {\n            let child = this.scene.children[i];\n            this.scene.remove(child);\n        }\n        // Add new player\n        this.player = new PlayerControls(this.props.player);\n        this.scene.add(this.player);\n\n        // Add new lights\n        let lights = new Lights(this.scene.fog, this.player.getMesh(), this.props.lights);\n        this.scene.add(lights);\n\n        let camera = this.player.getPerspectiveCamera();\n\n        // Post processing filters\n        let composer;\n\n        if (this.props.player.modelName === 'Rabbit') {\n            composer = new ComposerRabbit(this.renderer, this.scene, camera)\n        }\n\n        if (this.props.player.modelName === 'Fish') {\n            composer = new ComposerFish(this.renderer, this.scene, camera)\n        }\n\n        // animation\n        let timestamp = 0;\n        this.animate = (time) => {\n            const delta = (time - timestamp) / 1000;\n            timestamp = time;\n            const target = this.player.animate(delta, this.planet);\n            lights.animate(delta, this.scene.fog, target);\n            this.renderer.render(this.scene, camera);\n            this.animationFrame = requestAnimationFrame(this.animate);\n            if (composer) {\n                composer.render();\n            }\n        };\n\n        return <div ref={ref => (this.sceneRef = ref)} className=\"Scene\"/>;\n    }\n}\n\nScene.propTypes = {\n    planet: PropTypes.shape({\n        radius: PropTypes.number,\n        widthSegments: PropTypes.number,\n        heightSegments: PropTypes.number,\n        seed: PropTypes.number,\n        noiseWidth: PropTypes.number,\n        noiseHeight: PropTypes.number\n    }),\n    player: PropTypes.shape({\n        directionVelocity: PropTypes.number,\n        distance: PropTypes.number,\n        far: PropTypes.number,\n        fov: PropTypes.number,\n        frictionDelay: PropTypes.number,\n        gravity: PropTypes.number,\n        height: PropTypes.number,\n        jumpVelocity: PropTypes.number\n    })\n};\n\nScene.defaultProps = {\n    lights: {\n        distance: 512,\n        rotationSpeed: Math.PI / 30,\n        size: 16\n    },\n    planet: {\n        radius: 128,\n        widthSegments: 48,\n        heightSegments: 32,\n        seed: Date.now(),\n        noiseWidth: 32,\n        noiseHeight: 8\n    }\n};","import React, { Component } from 'react';\nimport './FrontPage.css';\n\nexport default class FrontPage extends Component {\n    constructor(props) {\n        super(props);\n        this.roll = this.roll.bind(this)//             \n    }\n    roll(){\n        // document.querySelector('#a').innerHTML = 'hi'\n        console.log('hi')\n    }\n    render(){\n       return <div className = \"Front\">\n\n                <div className = \"Word\">\n                  <span>X</span>\n                  <span> - </span>\n                  <span>p</span>\n                  <span>l</span>\n                  <span>a</span>\n                  <span>n</span>\n                  <span id = 'a' onMouseOver = {this.roll}>e</span>\n                  <span>t</span>\n                  \n\n                  <div className = \"vertical-text\">\n\n                      <div className = \"hero\">\n                      <p>h</p>\n                      <p className =\"down\">ro</p>\n                      </div>\n\n                      <div className = \"fish\">\n                      <p>f</p>\n                      <p className =\"down\">ying fish</p>\n                      </div>\n\n                  \n                  </div>\n                  </div>\n              </div>\n\n\n            //   hero Rabbit Fish \n\n            //   X-pla-(Rabbit)ne-(hero)t\n        \n    }\n}","import React, { Component } from 'react';\nimport { Scene } from './Scene';\nimport FrontPage from './FrontPage';\n\nexport default class App extends Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            pointerLock : 'pointerLockElement' in document || 'mozPointerLockElement' in document || 'webkitPointerLockElement' in document\n                ? false \n                : null,\n            webgl: false,\n            player: {\n                modelName: \"Rabbit\",\n                directionVelocity: 10,\n                distance: 30,\n                far: 1024,\n                fov: 60,\n                gravity: 9.81 ,\n                height: 1.618,\n                initialY: 256,\n                jumpVelocity: 1,\n                maxGravity: 54 / 2,\n                mouseSpeed: 0.002\n            }\n        };\n        \n        this.pointerLockChange = () => {\n            this.setState({\n                pointerLock : document.pointerLockElement === this.appRef.current || document.mozPointerLockElement === this.appRef.current || document.webkitPointerLockElement === this.appRef.current\n            });\n        };\n\n        this.requestPointerLock = () => {\n            if(this.state.pointerLock === false){\n                this.appRef.requestPointerLock = this.appRef.requestPointerLock || this.appRef.mozRequestPointerLock || this.appRef.webkitRequestPointerLock\n            }\n            this\n            .appRef\n            .requestPointerLock()\n        };\n\n        this.exitPointerLock = () =>{\n            if(this.state.pointerLock === true){\n                document.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock;\n                document.exitPointerLock();\n            }\n        };\n\n        this.onKeyDown = (event) => {\n            switch (event.keyCode) {\n                case 27:\n                    this.exitPointerLock();\n                    break;\n                // switch player model\n                case 49:\n                    this.setState((state, props) => ({\n                        player: {\n                            ...state.player,\n                            modelName: \"Rabbit\"\n                        }\n                    }));\n                    break;\n                case 50:\n                    this.setState((state, props) => ({\n                        player: {\n                            ...state.player,\n                            modelName: \"Hero\"\n                        }\n                    }));\n                    break;\n                case 51:\n                    this.setState((state, props) => ({\n                        player: {\n                            ...state.player,\n                            modelName: \"Fish\"\n                        }\n                    }));\n                    break;\n                default:\n                    break;\n            }\n        }\n    }\n\n    componentDidMount(){\n        if(this.state.pointerLock !== null){\n            document.addEventListener('keydown',this.onKeyDown, false);\n            document.addEventListener('pointerlockchange', this.pointerLockChange, false);\n            document.addEventListener('mozpointerlockchange', this.pointerLockChange, false);\n            document.addEventListener('webkitpointerlockchange', this.pointerLockChange, false);\n            document.addEventListener('pointerlockerror', console.log, false);\n            document.addEventListener('mozpointerlockerror', console.log, false);\n            document.addEventListener('webkitpointerlockerror', console.log, false);\n        }\n        if (window.WebGLRenderingContext){\n            const canvas = document.createElement('canvas'),\n                  webgl  = canvas.getContext(\"webgl\") || canvas.getContext(\"experimental-webgl\");\n            this.setState({webgl: Boolean(webgl)}) \n        }\n    }\n\n    componentWillUnmount(){\n        if(this.state.pointerLock !== null){\n            document.removeEventListener('keydown', this.onKeyDown, false);\n            document.removeEventListener('pointerlockchange', this.pointerLockChange, false);\n            document.removeEventListener('mozpointerlockchange', this.pointerLockChange, false);\n            document.removeEventListener('webkitpointerlockchange', this.pointerLockChange, false);\n            document.removeEventListener('pointerlockerror', console.log, false);\n            document.removeEventListener('mozpointerlockerror', console.log, false);\n            document.removeEventListener('webkitpointerlockerror', console.log, false);\n        }\n        this.exitPointerLock();\n    }\n\n    render(){\n        const alerts = [];\n        const instructions = this.state.webgl\n              ? \n              <div className = \"App\">\n                  <FrontPage/>\n                  <button onClick = {this.requestPointerLock}>Play</button>\n              </div>\n               : null;\n\n        const content = this.state.webgl \n         && this.state.pointerLock \n             ?<Scene player={this.state.player}/>\n             :<div className=\"App-interface\">\n             {instructions}\n         </div>;\n\n        if(this.state.pointerLock === null){\n            alerts.push('Your browser may not support Pointer Lock API.');\n        }\n        if (this.state.webgl === false){\n            alerts.push('Your browser or device may not support WebGL.')\n        }\n        return <div ref={ref => (this.appRef = ref)} className = \"App\">{content}</div>;\n            \n    }\n}\n\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n  "],"sourceRoot":""}